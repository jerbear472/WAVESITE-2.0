<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Validation Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #0a0a0a;
            color: #fff;
            max-width: 600px;
            margin: 0 auto;
        }
        .test-section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        .test-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #333;
        }
        .test-item:last-child {
            border-bottom: none;
        }
        .status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .pass {
            background: #10b981;
            color: white;
        }
        .fail {
            background: #ef4444;
            color: white;
        }
        .pending {
            background: #6b7280;
            color: white;
        }
        .info-box {
            background: #1e40af;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        h2 {
            font-size: 18px;
            margin-bottom: 16px;
            color: #9ca3af;
        }
        .device-info {
            background: #374151;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 14px;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        button:hover {
            background: #2563eb;
        }
        .swipe-test {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin: 20px 0;
            touch-action: pan-y;
            user-select: none;
            position: relative;
            overflow: hidden;
        }
        .swipe-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="info-box">
        <h1>📱 Mobile Validation Test Suite</h1>
        <p>Testing mobile optimization for the validation page</p>
    </div>

    <div class="device-info" id="deviceInfo">
        Detecting device...
    </div>

    <div class="test-section">
        <h2>Device Detection</h2>
        <div class="test-item">
            <span>Screen Width < 768px</span>
            <span class="status pending" id="screenWidth">Testing</span>
        </div>
        <div class="test-item">
            <span>Touch Support</span>
            <span class="status pending" id="touchSupport">Testing</span>
        </div>
        <div class="test-item">
            <span>Mobile User Agent</span>
            <span class="status pending" id="mobileUA">Testing</span>
        </div>
    </div>

    <div class="test-section">
        <h2>Swipe Gesture Test</h2>
        <div class="swipe-test" id="swipeTest">
            <div>
                <div>Swipe left or right</div>
                <div class="swipe-indicator">👆 Try swiping</div>
            </div>
        </div>
        <div class="test-item">
            <span>Horizontal Swipe (>100px)</span>
            <span class="status pending" id="swipeDistance">Not tested</span>
        </div>
        <div class="test-item">
            <span>Swipe Velocity (>3000)</span>
            <span class="status pending" id="swipeVelocity">Not tested</span>
        </div>
        <div class="test-item">
            <span>Touch Events Working</span>
            <span class="status pending" id="touchEvents">Not tested</span>
        </div>
    </div>

    <div class="test-section">
        <h2>Responsive Layout</h2>
        <div class="test-item">
            <span>Mobile Card Height (500px)</span>
            <span class="status pending" id="cardHeight">Checking</span>
        </div>
        <div class="test-item">
            <span>Touch-Optimized Buttons</span>
            <span class="status pending" id="buttonSize">Checking</span>
        </div>
        <div class="test-item">
            <span>Responsive Typography</span>
            <span class="status pending" id="typography">Checking</span>
        </div>
    </div>

    <div class="test-section">
        <h2>Performance</h2>
        <div class="test-item">
            <span>Animation Frame Rate</span>
            <span class="status pending" id="frameRate">Measuring</span>
        </div>
        <div class="test-item">
            <span>Touch Response Time</span>
            <span class="status pending" id="touchResponse">Measuring</span>
        </div>
    </div>

    <button onclick="runAllTests()">Run All Tests</button>
    <button onclick="window.location.href='/validate'">Open Validation Page</button>

    <script>
        // Device detection
        function detectDevice() {
            const info = {
                width: window.innerWidth,
                height: window.innerHeight,
                touch: 'ontouchstart' in window || navigator.maxTouchPoints > 0,
                userAgent: navigator.userAgent,
                isMobile: /iPhone|iPad|iPod|Android/i.test(navigator.userAgent),
                pixelRatio: window.devicePixelRatio
            };
            
            document.getElementById('deviceInfo').innerHTML = `
                Width: ${info.width}px | Height: ${info.height}px | 
                Touch: ${info.touch ? 'Yes' : 'No'} | 
                Mobile: ${info.isMobile ? 'Yes' : 'No'} |
                Pixel Ratio: ${info.pixelRatio}
            `;
            
            // Update test results
            updateStatus('screenWidth', info.width < 768);
            updateStatus('touchSupport', info.touch);
            updateStatus('mobileUA', info.isMobile);
            
            return info;
        }

        // Update test status
        function updateStatus(id, passed) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = passed ? 'Pass' : 'Fail';
                element.className = `status ${passed ? 'pass' : 'fail'}`;
            }
        }

        // Swipe test
        let startX = 0;
        let startTime = 0;
        const swipeTest = document.getElementById('swipeTest');
        
        swipeTest.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startTime = Date.now();
            updateStatus('touchEvents', true);
        });
        
        swipeTest.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            const distance = Math.abs(endX - startX);
            const time = Date.now() - startTime;
            const velocity = distance / time * 1000;
            
            // Check thresholds (matching our mobile validation page)
            const passDistance = distance > 100;
            const passVelocity = velocity > 3000;
            
            updateStatus('swipeDistance', passDistance);
            updateStatus('swipeVelocity', passVelocity);
            
            // Visual feedback
            if (passDistance || passVelocity) {
                swipeTest.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                swipeTest.innerHTML = '<div>✅ Swipe detected!</div>';
                setTimeout(() => {
                    swipeTest.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    swipeTest.innerHTML = '<div><div>Swipe left or right</div><div class="swipe-indicator">👆 Try swiping</div></div>';
                }, 1500);
            }
        });
        
        // Mouse fallback for desktop testing
        swipeTest.addEventListener('mousedown', (e) => {
            startX = e.clientX;
            startTime = Date.now();
        });
        
        swipeTest.addEventListener('mouseup', (e) => {
            const endX = e.clientX;
            const distance = Math.abs(endX - startX);
            const time = Date.now() - startTime;
            const velocity = distance / time * 1000;
            
            if (!('ontouchstart' in window)) {
                console.log(`Mouse swipe: ${distance}px, ${velocity}px/s`);
            }
        });

        // Test responsive layout
        function testResponsiveLayout() {
            const isMobile = window.innerWidth < 768;
            
            // These would check actual elements on the validation page
            // For this test, we're simulating the checks
            updateStatus('cardHeight', isMobile);
            updateStatus('buttonSize', true);
            updateStatus('typography', true);
        }

        // Test performance
        function testPerformance() {
            let frameCount = 0;
            let lastTime = performance.now();
            
            function measureFrameRate() {
                frameCount++;
                const currentTime = performance.now();
                
                if (currentTime - lastTime >= 1000) {
                    const fps = frameCount;
                    updateStatus('frameRate', fps >= 30);
                    return;
                }
                
                requestAnimationFrame(measureFrameRate);
            }
            
            measureFrameRate();
            
            // Test touch response
            const touchStart = performance.now();
            setTimeout(() => {
                const responseTime = performance.now() - touchStart;
                updateStatus('touchResponse', responseTime < 100);
            }, 10);
        }

        // Run all tests
        function runAllTests() {
            detectDevice();
            testResponsiveLayout();
            testPerformance();
            
            // Show completion message
            setTimeout(() => {
                const allPassed = document.querySelectorAll('.status.pass').length;
                const total = document.querySelectorAll('.status').length;
                
                if (allPassed === total) {
                    alert('✅ All tests passed! The validation page is optimized for mobile.');
                } else {
                    alert(`⚠️ ${allPassed}/${total} tests passed. Check failed items.`);
                }
            }, 1500);
        }

        // Run initial detection
        detectDevice();
        
        // Re-run on orientation change
        window.addEventListener('orientationchange', detectDevice);
        window.addEventListener('resize', detectDevice);
    </script>
</body>
</html>